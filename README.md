# Поисковый сервер

- Принимает на вход данные XML формата. Для парсинга XML используется библиотека
RapidXML https://rapidxml.sourceforge.net/
- Имеет возможность ранжировать документы по TF-IDF.
- Находит совпадения отдельных слов в хранящемся документе.
- Выдает ответы на запросы к серверу на экран.

*Для сборки проекта необходима поддержка стандарта не ниже С++17.*

## Запуск программы

Для создания поискового сервера программу необходимо запустить, указав при этом входной XML-файл.
Пример запуска программы для заполнения базы:  
`search_server.exe in.xml`

В ответ программа выведет в консоль ответы на запросы.

## Формат входных данных

Входные данные поступают программе из stdin в формате XML-объекта,
который имеет на верхнем уровне следующую структуру:

```
<?xml version="1.0" encoding="utf-8"?>
<requests>
   ...
</requests>
```

## Виды запросов

- ## `document`

Запрос на добавление в сервер документа. Имеет следующие атрибуты:  
- `id` - индекс документа, целое число (не может быть отрицательным);
- `text` - содержание документа, строка текста;
- `status` - статус документа (активный, запрещенный, не релевантный, удаленный);
- `ratings` - набор оценок рейтинга документа, целые числа через запятую.

Пример запроса на добавления документа в сервер:  
```
<document id="1" text="curly cat curly tail" status="actual" ratings="7, 2, 7"></document>
```

- ## `stop_words`

Запрос на добавление стоп-слов в сервер (не учитываюся при поиске). Представляет собой строку текста.  
Пример запроса на добавления документа в сервер:  
```
<stop_words>in at and</stop_words>
```

- ## `page_size`

Запрос на изменение настройки вывода результатов поиска, а именно, сколько ответов содержится на одной "странице".
Представляет собой целое число и не может быть меньше единицы (по умолчанию `1`).  
Пример запроса на изменение количества выводимых ответов на странице:  
```
<page_size>2</page_size>
```

- ## `find`

Запрос на поиск среди документов слова или фразы.
Представляет собой строку текста.  
Пример запроса на поиск среди документов слова или фразы:  
```
<find_request>curly dog</find_request>
```

- ## `match`

Запрос на поиск слов в конкретном документе.
Содержит два атрибута:
- `id` - индекс документа, целое число (не может быть отрицательным);
- `text` - слово или фраза для поиска в документе, строка текста;  
Пример запроса на поиск слов в конкретном документе:  
```
<match id="1" text="curly cat"></match>
```

- ## `no_result`

Запрос количества пустых запросов (запросов по которым ничего небыло найдено).
Не содержит в себе значений или атрибутов.  
Пример запроса на поиск слов в конкретном документе:  
```
<no_result></no_result>
```

## Формат выходных данных

- ## Ответ на запрос `find`

В ответ на запрос программа выводит список документов с убывающей релевантностью по `page_size` на странице.
Если на запрос ничего не было найдено - выводится пустая строка.
Страницы разделяются фразой `Page Break`.  
Формат вывода:
```
Find request: 'текст запроса'
`{ индекс документа, релевантность, рейтинг}...`
```
Пример вывода:  
```
Find request: 'curly dog'
{ document_id = 1, relevance = 0.458145, rating = 5 }{ document_id = 2, relevance = 0.356779, rating = 2 }
Page break
{ document_id = 4, relevance = 0.127706, rating = 2 }{ document_id = 5, relevance = 0.127706, rating = 1 }
Page break
```

- ## Ответ на запрос `match`

В ответ на запрос программа выводит совпадения слов в запросе и в документе. Выводится только один запрос на странице.
Формат вывода:
```
Match request: 'текст запроса' with document id: индекс документа
`{ индекс документа, статус, слова}...`
```
Пример вывода:  
```
Match request: 'curly cat' with document id: 1
{ document_id = 1, status = actual, words = cat curly }
Page break
```

- ## Ответ на запрос `no_result`

В ответ на запрос программа выводит количество "пустых" запросов.  
Пример вывода:  
`Total empty requests: 1`